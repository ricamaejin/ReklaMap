<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="icon" type="image/png" href="/images/logo.png">
  <title>ReklaMap</title>
  <link rel="stylesheet" href="/css/complainants.css">
</head>
<body>

  <!-- Sidebar -->
  <aside class="sidebar">
    <div class="logo-section">
      <img src="/images/logo.png" alt="ReklaMap Logo" class="logo">
      <span class="title"><span class="blue-text">Rekla</span><span class="green-text">Map</span></span>
    </div>
    <nav class="nav-menu">
      <a href="/complainant/home/dashboard.html" class="nav-item">Home</a>
      <a href="/complainant/complaints/submitted_complaints.html" class="nav-item active">Complaints</a>
    </nav>
  </aside>
  

  <!-- Main Form -->
  <div class="main">
    <div class="form-container">
      <form  id="BoundaryDisputeForm">
      <h1 style="text-decoration: underline;">COMPLAINT FORM <br> BOUNDARY DISPUTE</h1>
      <div class="instructions">
        <p><strong>INSTRUCTION</strong></p>
        <ul>
          <li>Complete the application form properly and legibly.</li>
          <li>For checkbox items (☑), you may select more than one option if applicable.</li>
          <li>For radio button items (◉), please select only one option.</li>
          <li>If a field or question does not apply to you or you do not know the answer, write “N/A” (Not Applicable).</li>
          <li>Ensure all required fields are filled before submitting the form.</li>
        </ul>
      </div>

  <div class="section-header">COMPLAINANT'S DETAILS:</div>
  <div id="complainantDetails"></div>
<style>
  /* Grey out autofilled (read-only) complainant detail fields, match lot_dispute.html */
  #complainantDetails .pairs input[readonly] {
    color: #555 !important;
    background: #f1f3f5 !important;
  }
  #complainantDetails .pairs input[readonly]::placeholder { color: #888; }
  #complainantDetails .pair-row { display: flex; gap: 16px; margin-bottom: 8px; }
  #complainantDetails .col { flex: 1; min-width: 120px; }
  #complainantDetails label.small { font-size: 13px; color: #333; margin-bottom: 2px; display: block; }
</style>
<script>
// Populate complainant details (structure and layout copied from lot_dispute.html)
document.addEventListener('DOMContentLoaded', async () => {
  try {
    const res = await fetch('/complainant/boundary_dispute/get_boundary_session_data');
    if (!res.ok) return;
    const d = await res.json();
    const container = document.getElementById('complainantDetails');
    if (!container || !d || d.error) return;

    const pairs = document.createElement('div');
    pairs.className = 'pairs';

    // Helper to create supporting documents section (only for hoa_member and family_of_member)
    // Helper to create supporting documents section (checkbox grid, like lot_dispute.html)
    function createSupportingDocsSection(docs) {
      if (!docs) return null;
      // Define doc options (keys must match backend)
      const docList = [
        {key: 'title', label: 'Title'},
        {key: 'contract_to_sell', label: 'Contract to Sell'},
        {key: 'certificate_of_full_payment', label: 'Certificate of Full Payment'},
        {key: 'pre_qualification_stub', label: 'Pre-qualification Stub'},
        {key: 'contract_agreement', label: 'Contract/Agreement'},
        {key: 'deed_of_sale', label: 'Deed of Sale'}
      ];
      // Determine selected docs (array or object)
      let selected = {};
      if (Array.isArray(docs)) {
        docs.forEach(k => selected[k] = true);
      } else if (typeof docs === 'object') {
        selected = docs;
      }
      // Build the grid
      const row = document.createElement('div');
      row.className = 'pair-row';
      let html = `<div class=\"col\"><label class=\"small\" style=\"font-weight:600; display:block; margin-bottom:2px;\">Supporting Documents:</label>`;
      html += `<div class='checkbox-group' style=\"display:grid; grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); gap:6px 16px;\">`;
      docList.forEach(doc => {
        const checked = selected[doc.key] ? 'checked' : '';
        html += `<label style=\"white-space:nowrap;\"><input type=\"checkbox\" disabled ${checked}> ${doc.label}</label>`;
      });
      html += '</div></div>';
      row.innerHTML = html;
      return row;
    }

    function row1(label, value, type = 'text') {
      const r = document.createElement('div');
      r.className = 'pair-row';
      r.innerHTML = `<div class="col"><label class="small">${label}</label><input type="${type}" value="${value || ''}" readonly></div>`;
      return r;
    }
    function row2(l1, v1, l2, v2, t1='text', t2='text') {
      const r = document.createElement('div');
      r.className = 'pair-row';
      r.innerHTML = `
        <div class="col"><label class="small">${l1}</label><input type="${t1}" value="${v1 || ''}" readonly></div>
        <div class="col"><label class="small">${l2}</label><input type="${t2}" value="${v2 || ''}" readonly></div>`;
      return r;
    }
    function row3(l1, v1, l2, v2, l3, v3) {
      const r = document.createElement('div');
      r.className = 'pair-row';
      r.innerHTML = `
        <div class="col"><label class="small">${l1}</label><input type="text" value="${v1 || ''}" readonly></div>
        <div class="col"><label class="small">${l2}</label><input type="text" value="${v2 || ''}" readonly></div>
        <div class="col"><label class="small">${l3}</label><input type="text" value="${v3 || ''}" readonly></div>`;
      return r;
    }

    // Helper to normalize middle initials to a single trailing period (e.g., "B" or "B.." -> "B.")
    function normalizeName(name) {
      if (!name || typeof name !== 'string') return name || '';
      return name.replace(/\b([A-Z])\.*\b/g, '$1.');
    }

    // HOA Member
    if (d.category === 'hoa_member') {
  pairs.appendChild(row1('Full Name:', normalizeName(d.full_name)));
  pairs.appendChild(row2('Date of Birth:', d.date_of_birth, 'Sex:', d.sex, 'date', 'text'));
  pairs.appendChild(row2('Citizenship:', d.citizenship, 'Age:', d.age));
  pairs.appendChild(row2('Phone Number:', d.phone_number, 'Year of Residence:', d.year_of_residence));
  pairs.appendChild(row1('Area (HOA):', d.hoa));
  pairs.appendChild(row1('Current Address:', d.cur_add));
  pairs.appendChild(row3('Block:', d.blk_num, 'Lot:', d.lot_num, 'Lot Size:', d.lot_size));
  pairs.appendChild(row2('Civil Status:', d.civil_status, 'Recipient of other housing programs:', d.recipient_of_other_housing));
  const docsSection = createSupportingDocsSection(d.supporting_documents);
  if (docsSection) pairs.appendChild(docsSection);
    }
    // Non-member
    else if (d.category === 'non_member') {
  pairs.appendChild(row1('Full Name:', normalizeName(d.full_name)));
  pairs.appendChild(row2('Date of Birth:', d.date_of_birth, 'Sex:', d.sex, 'date', 'text'));
  pairs.appendChild(row2('Citizenship:', d.citizenship, 'Age:', d.age));
  pairs.appendChild(row2('Phone Number:', d.phone_number, 'Year of Residence:', d.year_of_residence));
  pairs.appendChild(row2('Civil Status:', d.civil_status || '', 'Recipient of Other Housing:', d.recipient_of_other_housing || ''));
  pairs.appendChild(row1('Current Address:', d.cur_add));
  pairs.appendChild(row1('Area (HOA):', d.hoa || ''));
    }
    // Family of member
    else if (d.category === 'family_of_member') {
      // --- Updated layout for family_of_member HOA Member Information ---
      pairs.appendChild(row1('Full Name:', normalizeName(d.full_name)));
      pairs.appendChild(row2('Date of Birth:', d.date_of_birth, 'Sex:', d.sex, 'date', 'text'));
      pairs.appendChild(row2('Citizenship:', d.citizenship, 'Age:', d.age));
      pairs.appendChild(row2('Phone Number:', d.phone_number, 'Year of Residence:', d.year_of_residence));
      pairs.appendChild(row2('Relationship:', d.relationship || '', 'Current Address:', d.cur_add));

      let memberWrapper = null;
      if (d.parent_info) {
        memberWrapper = document.createElement('div');
        memberWrapper.style.marginTop = '20px';
        const h3 = document.createElement('h3');
        h3.textContent = 'HOA Member Information';
        h3.style.color = '#083048';
        h3.style.marginBottom = '10px';
        memberWrapper.appendChild(h3);
        const memberPairs = document.createElement('div');
        memberPairs.className = 'pairs';
        const p = d.parent_info;
        // Full Name (single row)
        memberPairs.appendChild(row1('Full Name:', normalizeName(p.full_name)));
        // Date of Birth | Sex
        memberPairs.appendChild(row2('Date of Birth:', p.date_of_birth, 'Sex:', p.sex, 'date', 'text'));
        // Citizenship | Age
        memberPairs.appendChild(row2('Citizenship:', p.citizenship, 'Age:', p.age));
        // Rest as before
        memberPairs.appendChild(row1('Area (HOA):', d.hoa || ''));
        memberPairs.appendChild(row1('Current Address:', p.current_address));
        memberPairs.appendChild(row3('Block Assignment:', d.blk_num || '', 'Lot Assignment:', d.lot_num || '', 'Lot Size:', d.lot_size || ''));
        memberPairs.appendChild(row2('Civil Status:', d.civil_status || '', 'Recipient of Other Housing:', d.recipient_of_other_housing || ''));
        // Insert supporting docs after Civil Status/Recipient row in memberPairs
        const docSection = createSupportingDocsSection(d.parent_info.supporting_documents);
        if (docSection) memberPairs.appendChild(docSection);
        memberWrapper.appendChild(memberPairs);
      }
      container.innerHTML = '';
      container.appendChild(pairs);
      if (memberWrapper) container.appendChild(memberWrapper);
      return;
    }

    container.innerHTML = '';
    container.appendChild(pairs);
  } catch (e) {}
});
</script>

      <!-- Section 1 -->
      <div class="section-header">LOT DETAILS AND CLAIM:</div>
      <p><strong>1. What is the nature of the boundary issue? </strong> <i style="font-size: 14px; font-weight: normal; color: grey;">(Check all that apply)</i></p>
      <label><input type="checkbox" value="Neighbor structure extends beyond line"> A neighbor’s house or structure extends beyond their boundary line</label>
      <label><input type="checkbox" value="Fence overlaps into my property"> A fence or wall installed by the neighbor overlaps into my property</label>
      <label><input type="checkbox" value="Construction within my claimed boundary"> Construction is ongoing within my claimed boundary</label>
      <label><input type="checkbox" value="Shared boundary demolished"> Shared boundary structure (wall/fence) was demolished without consent</label>
      <label><input type="checkbox" value="Boundary markers moved"> Boundary markers (mohon) were moved or removed</label>
      <label><input type="checkbox" value="Neighbor expanded structure beyond assigned area"> The neighbor expanded their structure beyond their assigned area</label>
      <label><input type="checkbox" style="margin-bottom: 12px;"> Encroachment is affecting access to utilities (e.g., water, drainage, electricity)</label>


      <p><strong>2. How long has this encroachment existed?</strong></p>
      <label><input type="radio" name="conflict"> Less than 1 month</label>
      <label><input type="radio" name="conflict"> 1-6 months</label>
      <label><input type="radio" name="conflict"> More than 6 months</label>
      <label><input type="radio" name="conflict" style="margin-bottom: 12px;"> Not sure</label>

      <p><strong>3. Has the encroaching structure already been built or is it under construction?</strong></p>
      <label><input type="radio"> Fully constructed</label>
      <label><input type="radio"> Partially constructed</label>
      <label><input type="radio"> Ongoing construction</label>
      <label><input type="radio" style="margin-bottom: 12px;"> Structure was removed but boundary still contested</label>
      
      <p><strong>4. Were you given any prior notice before the structure crossed into your property?</strong></p>
      <label><input type="radio" name="notice"> Yes</label>
      <label><input type="radio" name="notice" style="margin-bottom: 12px;"> No</label>
      
      <p> <strong>5. Have you discussed or confronted the other party about the boundary issue?</strong></p>
      <label><input type="radio" name="confronted" value="yes" id="reasonYes"> Yes</label>
      <div id="reasonDetails" style="display: none; margin-left: 22px;">
        <p>Date Reported</p>
        <input id="reasonDateInput" type="date" style="width: 20%; padding: 8px; margin-top: 6px; margin-left: 18px; margin-bottom: 12px; border: 1px solid #ccc; border-radius: 4px; font-size: 14px;"/>
      </div>
      <label><input type="radio" name="confronted" value="no"> No</label>

      <p><strong>6. Has the dispute led to any of the following? </strong><i style="font-size: 14px; font-weight: normal; color: grey;">(Check all that apply)</i></p>
      <label><input type="checkbox"> Threats or harassment</label>
      <label><input type="checkbox"> Physical altercation</label>
      <label><input type="checkbox"> Demolition or forced entry</label>
      <label><input type="checkbox"> Property damage</label>
      <label><input type="checkbox" style="margin-bottom: 12px;" value="None"> None</label>

      <label><strong>7. Have you reported this boundary issue to any office or authority?</strong> <i style="font-size: 14px; font-weight: normal; color: grey;">(Check all that apply)</i></label>
      <label><input type="checkbox" name="boundary_reported_to[]" value="Barangay"> Barangay</label>
      <label><input type="checkbox" name="boundary_reported_to[]" value="HOA"> HOA</label>
      <label><input type="checkbox" name="boundary_reported_to[]" value="NGC"> NGC</label>
      <label><input type="checkbox" name="boundary_reported_to[]" value="NGC"> USAD - PHASELAD</label>
      <label><input type="checkbox" name="boundary_reported_to[]" value="none"> None</label>

      <label><strong>8. Was there any site inspection or verification conducted?</strong></label>
      <label><input type="radio" name="site_inspection" value="Yes - Barangay" required> Yes – by Barangay</label>
      <label><input type="radio" name="site_inspection" value="Yes - HOA"> Yes – by HOA</label>
      <label><input type="radio" name="site_inspection" value="Yes - NGC"> Yes – by NGC</label>
      <label><input type="radio" name="site_inspection" value="Yes - NGC"> Yes – by USAD - PHASELAD</label>
      <label><input type="radio" name="site_inspection" value="No"> No</label>
      <label><input type="radio" name="site_inspection" value="Not sure"> Not sure</label>

      <label><strong>9. What was the result of the report or inspection?</strong> <i style="font-size: 14px; font-weight: normal; color: grey;">(Check all that apply)</i></label>
      <label><input type="checkbox" name="site_result[]" value="Advised to adjust or vacate"> The other party was advised to adjust or vacate</label>
      <label><input type="checkbox" name="site_result[]" value="Asked to provide more documents"> I was advised to provide more documents</label>
      <label><input type="checkbox" name="site_result[]" value="Still under investigation"> The issue is still under investigation</label>
      <label><input type="checkbox" name="site_result[]" value="No valid claim"> I was told I have no valid claim</label>
      <label><input type="checkbox" name="site_result[]" value="No action taken"> No action was taken</label>
      <label><input type="checkbox" name="site_result[]" value="Not applicable"> Not applicable / No inspection yet</label>

      <label><strong>10. Do you have any documents or proof showing your boundary or property line?</strong></label>
      <label><input type="radio" name="have_docs" value="Yes" required> Yes</label>
        <div id="boundaryDocOptions" style="display:none; margin-left: 15px;">
          <p><strong>Please specify:</strong> <i style="font-size: 14px; font-weight: normal; color: grey;">(Check all that apply)</i></p>
          <label><input type="checkbox" name="boundary_docs[]" value="Subdivision or site survey map"> Subdivision or site survey map</label>
          <label><input type="checkbox" name="boundary_docs[]" value="Certificate of Lot Award (CLA)"> Title</label>
          <label><input type="checkbox" name="boundary_docs[]" value="Approved fence or building plan"> Building permit</label>
          <label><input type="checkbox" name="boundary_docs[]" value="Barangay certification or inspection report"> Barangay certification or inspection report</label>
          <label><input type="checkbox" name="boundary_docs[]" value="Photographs showing boundary markers or encroachment"> Photographs showing boundary markers or encroachment</label>
        </div>
      <label><input type="radio" name="have_docs" value="No"> No</label>

      <p><strong>11. Is there an ongoing development or government housing project in the area?</strong></p>
      <label><input type="radio" name="reason"> Yes</label>
      <label><input type="radio" name="reason"> No</label>
      <label><input type="radio" name="reason" style="margin-bottom: 12px;"> Not sure</label>

      <!-- Section 2 -->
      <div class="section-header">PERSONS INVOLVED DETAILS</div>
      <p>1. Who are the persons and specific block and lot numbers involved in the boundary dispute? 
        <i style="font-size: 14px; font-weight: normal; color: grey;">(Excluding yours)</i>
      </p>

      <div class="pairs" id="pairsContainer" aria-live="polite" style="background-color: #f8fbff; border-radius: 6px; padding: 12px;">
        <div class="pair-row" style="display: flex; gap: 12px; align-items: center; margin-bottom: 10px;">
          <div style="flex: 1;">
            <label for="personName">Name of Person</label>
            <input type="text" placeholder="Enter name" class="form-control" />
          </div>
          <div style="width: 140px;">
            <label for="blockNo">Block No.</label>
            <input type="text" placeholder="Block No." class="form-control" />
          </div>
          <div style="width: 140px;">
            <label for="lotNo">Lot No.</label>
            <input type="text" placeholder="Lot No." class="form-control" />
          </div>
          <button type="button" class="btn remove small" style="margin-top: 24px; color: #999;">Remove</button>
        </div>
      </div>

      <div class="pair-controls" style="margin-top: 10px;">
        <button type="button" class="btn add small" id="addPairBtn" style="margin-bottom: 8px;">+ Add</button>
        <span style="color: var(--muted); font-size: 13px; margin-left: 8px;">
          <i style="font-size: 14px; font-weight: normal; color: grey;">
            (If more than one person or area is affected, list all applicable entries.)
          </i>
        </span>
      </div>

      <label><strong>2. Relationship with the person involved:</strong></label>
      <div id="relationshipContainer">
        <div class="relationship-input" style="display: flex; gap: 8px; align-items: center; margin-bottom: 8px;">
          <input type="text" name="boundary_relationship" placeholder="Specify relationship (neighbor, relative, etc.)" style="flex: 1; margin-left: 15px;">
        </div>
      </div>
      <button type="button" class="btn add small" id="addRelationshipBtn" style="margin-left: 15px; margin-bottom: 12px;">+ Add another relationship</button>

      <label><strong>3. Do they reside on or near the disputed boundary?</strong></label>
      <div class="options-group">
        <label><input type="radio" name="boundary_reside" value="Yes"> Yes</label>
        <label><input type="radio" name="boundary_reside" value="No"> No</label>
        <label><input type="radio" name="boundary_reside" value="Not sure"> Not sure</label>
      </div>

      <label><strong>4. Do they claim to have legal or assignment documents?</strong></label>
      <div class="options-group" id="claimDocs">
        <label><input type="radio" name="claimDocs" value="Yes"> Yes</label>
        <div id="docOptions" style="display:none; margin-left: 35px;">
          <p style="margin-left: 5px; font-weight: bold;">What documents do they have?</p>
          <label><input type="checkbox" name="docs" value="Title"> Title</label>
          <label><input type="checkbox" name="docs" value="Contract to Sell"> Contract to Sell</label>
          <label><input type="checkbox" name="docs" value="Certificate of Full Payment"> Certificate of Full Payment</label>
          <label><input type="checkbox" name="docs" value="Pre-qualification Stub"> Pre-qualification Stub</label>
          <label><input type="checkbox" name="docs" value="Contract/Agreement"> Contract/Agreement</label>
          <label><input type="checkbox" name="docs" value="Deed of Sale"> Deed of Sale</label>
        </div>
        <label><input type="radio" name="claimDocs" value="No"> No</label>
      </div>

      <!-- Section 3 -->
        <p  class="section-label">Please describe what happened briefly, including how you found out about the issue.</p>
        <textarea></textarea>

        <div class="section-header">COMPLAINANT’S CONSENT AND DECLARATION</div>
    <p class="section-label">Please describe what happened briefly, including how you found out about the issue.</p>
    <textarea name="description" rows="4" style="width:100%;margin-bottom:16px;"></textarea>
    <div style="margin: 18px 0 8px 0; font-weight: bold;">Signature</div>
    <input type="text" name="signature" placeholder="Enter your name as signature" style="width: 60%; padding: 8px; border: 1px solid #ccc; border-radius: 4px; font-size: 15px;">
</script>

<script>
document.addEventListener('DOMContentLoaded', () => {
  const form = document.getElementById('BoundaryDisputeForm');
  if (!form) return;

  // --- helpers ---
  function findQ6Start() {
    const nodes = Array.from(form.querySelectorAll('p, label, div, h1, h2, h3'));
    return nodes.find(el => {
      const t = (el.textContent || '').trim();
      return /^6\./.test(t) || /Has the dispute led/i.test(t);
    }) || null;
  }

  function isQ7Header(el) {
    if (!el) return false;
    const t = (el.textContent || '').trim();
    if (/^7\./.test(t)) return true;
    if (/Have you reported/i.test(t)) return true;
    const strong = el.querySelector && el.querySelector('strong');
    if (strong && /^\s*7\./.test((strong.textContent || '').trim())) return true;
    return false;
  }

  function collectCheckboxesBetween(startEl, stopCond) {
    const boxes = [];
    let el = startEl.nextElementSibling;
    while (el) {
      if (stopCond(el)) break;
      if (el.querySelector) {
        const inputs = Array.from(el.querySelectorAll('input[type="checkbox"]'));
        inputs.forEach(i => boxes.push(i));
      }
      el = el.nextElementSibling;
    }
    return boxes;
  }

  function setupExclusiveNoneForList(checkboxList) {
    if (!checkboxList || checkboxList.length === 0) return;
    // find the group's "None" checkbox by value or by label text
    const none = checkboxList.find(cb => {
      if (!cb) return false;
      const v = (cb.value || '').trim().toLowerCase();
      if (v === 'none') return true;
      const lbl = cb.closest && cb.closest('label');
      return lbl && /\bnone\b/i.test(lbl.textContent || '');
    });
    if (!none) return;
    const others = checkboxList.filter(cb => cb !== none);

    // initialize state (handles prechecked)
    if (none.checked) {
      others.forEach(cb => { cb.checked = false; cb.disabled = true; cb.closest('label')?.classList.add('disabled'); });
    } else {
      others.forEach(cb => { cb.disabled = false; cb.closest('label')?.classList.remove('disabled'); });
    }

    // When None toggles
    none.addEventListener('change', () => {
      if (none.checked) {
        others.forEach(cb => { cb.checked = false; cb.disabled = true; cb.closest('label')?.classList.add('disabled'); });
      } else {
        others.forEach(cb => { cb.disabled = false; cb.closest('label')?.classList.remove('disabled'); });
      }
    });

    // When any other is checked, ensure None is unchecked (and enabled)
    others.forEach(cb => {
      cb.addEventListener('change', () => {
        if (cb.checked) {
          none.checked = false;
          none.disabled = false;
          none.closest('label')?.classList.remove('disabled');
        }
      });
    });
  }

  // --- Q6: collect checkboxes between Q6 header and Q7 header ---
  const q6Start = findQ6Start();
  const q6Checkboxes = q6Start ? collectCheckboxesBetween(q6Start, isQ7Header) : [];
  setupExclusiveNoneForList(q6Checkboxes);

  // --- Q7: by name attribute ---
  const q7Checkboxes = Array.from(form.querySelectorAll('input[name="boundary_reported_to[]"][type="checkbox"]'));
  setupExclusiveNoneForList(q7Checkboxes);

  // --- small CSS hint for disabled labels (visual cue) ---
  const style = document.createElement('style');
  style.textContent = `
    label.disabled { opacity: 0.6; }
    label.disabled input { cursor: not-allowed; }
  `;
  document.head.appendChild(style);
});
</script>

<script>
  document.addEventListener("DOMContentLoaded", () => {
  const q9Checkboxes = document.querySelectorAll('input[name="site_result[]"]');
  if (q9Checkboxes.length === 0) return;

  const notApplicable = Array.from(q9Checkboxes).find(
    cb => (cb.value || "").toLowerCase().includes("not applicable")
  );
  const others = Array.from(q9Checkboxes).filter(cb => cb !== notApplicable);

  if (!notApplicable) return;

  // Initial state check
  if (notApplicable.checked) {
    others.forEach(cb => {
      cb.checked = false;
      cb.disabled = true;
      cb.closest("label")?.classList.add("disabled");
    });
  }

  // When Not Applicable is toggled
  notApplicable.addEventListener("change", () => {
    if (notApplicable.checked) {
      others.forEach(cb => {
        cb.checked = false;
        cb.disabled = true;
        cb.closest("label")?.classList.add("disabled");
      });
    } else {
      others.forEach(cb => {
        cb.disabled = false;
        cb.closest("label")?.classList.remove("disabled");
      });
    }
  });

  // If others are checked, uncheck Not Applicable
  others.forEach(cb => {
    cb.addEventListener("change", () => {
      if (cb.checked) {
        notApplicable.checked = false;
        notApplicable.disabled = false;
        notApplicable.closest("label")?.classList.remove("disabled");
      }
    });
  });
});

</script>

</body>
</html>